# Production-Ready Environment Configuration
# Routes through onasis-core for proper authentication

NODE_ENV=development
PORT=3000
HOST=0.0.0.0

# Core Authentication Server (NOT dashboard)
AUTH_SERVER_URL=https://api.lanonasis.com
API_BASE_URL=https://api.lanonasis.com
MEMORY_API_URL=https://api.lanonasis.com/api/v1

# OAuth Configuration (routes to core)
OAUTH_CLIENT_ID=lanonasis_mcp_client_2024
OAUTH_REDIRECT_URI=https://api.lanonasis.com/auth/oauth/callback

# Database Configuration
SUPABASE_URL=https://nbmomsntbamfthxfdnme.supabase.co
SUPABASE_KEY=${SUPABASE_ANON_KEY}
SUPABASE_SERVICE_KEY=${SUPABASE_SERVICE_ROLE_KEY}

# JWT Configuration
JWT_SECRET=${JWT_SECRET}
JWT_EXPIRES_IN=24h

# API Configuration 
API_VERSION=v1
API_PREFIX=/api

# API Key Configuration
API_KEY_ENCRYPTION_KEY=${API_KEY_ENCRYPTION_KEY}
API_KEY_PREFIX_DEVELOPMENT=sk_test_
API_KEY_PREFIX_PRODUCTION=onasis_live_
API_KEY_DEFAULT_EXPIRY_DAYS=365

# OpenAI Configuration
OPENAI_API_KEY=${OPENAI_API_KEY}

# Redis Configuration (required for production)
REDIS_URL=redis://localhost:6379
REDIS_PASSWORD=
REDIS_KEY_PREFIX=lanonasis:
REDIS_API_KEY_TTL=300
REDIS_SESSION_TTL=28800

# CORS Configuration (proper JSON API support)
CORS_ORIGIN=https://lanonasis.com,https://api.lanonasis.com,https://mcp.lanonasis.com,http://localhost:3000
CORS_CREDENTIALS=true

# MCP Configuration
MCP_ENABLED=true
MCP_ACCESS_REQUEST_EXPIRY_HOURS=24
MCP_SESSION_TIMEOUT_HOURS=8
MCP_MAX_TOOLS_PER_KEY=10

# Logging Configuration
LOG_LEVEL=info
LOG_FORMAT=json

# Rate Limiting (generous for API clients)
RATE_LIMIT_WINDOW_MS=900000
RATE_LIMIT_MAX_REQUESTS=1000

# Metrics and Monitoring
ENABLE_METRICS=true
METRICS_PORT=9090

# Security Configuration
SECURITY_ALERT_ENABLED=true
SECURITY_ALERT_THRESHOLD_CRITICAL=5
SECURITY_ALERT_THRESHOLD_HIGH=10
ANOMALY_DETECTION_ENABLED=true
ANOMALY_DETECTION_SENSITIVITY=0.85

# Auto-suspension thresholds
AUTO_SUSPEND_FAILED_AUTH_ATTEMPTS=10
AUTO_SUSPEND_RATE_LIMIT_VIOLATIONS=50
AUTO_SUSPEND_ANOMALY_SCORE=0.95

# Enterprise Features
HSM_ENABLED=false
PROXY_TOKEN_ENABLED=true
PROXY_TOKEN_EXPIRY_HOURS=1
PROXY_TOKEN_MAX_USES=100

# Analytics & Telemetry
ANALYTICS_ENABLED=true
USAGE_TRACKING=true
ANALYTICS_BATCH_SIZE=100
ANALYTICS_FLUSH_INTERVAL_MS=60000

# Backup & Recovery
BACKUP_ENABLED=true
BACKUP_RETENTION_DAYS=30
BACKUP_ENCRYPTION_ENABLED=true

# Key Rotation
KEY_ROTATION_REMINDER_DAYS=30
KEY_ROTATION_ENFORCE_DAYS=90

# Metrics Retention
METRICS_RETENTION_DAYS=90
METRICS_AGGREGATION_ENABLED=true
METRICS_AGGREGATION_INTERVALS=hour,day,week,month